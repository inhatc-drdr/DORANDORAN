<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

  <title>Hello, world!</title>

  <style>
    .form-signin {
      width: 100%;
      max-width: 330px;
      padding: 15px;
      margin: auto;
    }

    .form-signin .checkbox {
      font-weight: 400;
    }

    .form-signin .form-floating:focus-within {
      z-index: 2;
    }

    .form-signin input[type="email"] {
      margin-bottom: -1px;
      border-bottom-right-radius: 0;
      border-bottom-left-radius: 0;
    }

    .form-signin input[type="password"] {
      margin-bottom: 10px;
      border-top-left-radius: 0;
      border-top-right-radius: 0;
    }
  </style>
</head>

<body>
  <main class="container">

    <header class="text-center">
      <h1>Hello, world!</h1>
      <p></p>
    </header>


    <!-- 탭 메뉴 -->
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button"
          role="tab" aria-controls="login" aria-selected="true">로그인</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="join-tab" data-bs-toggle="tab" data-bs-target="#join" type="button"
          role="tab" aria-controls="join" aria-selected="false">회원가입</button>
      </li>
      <li class="nav-item" role="presentation">
      <button class="nav-link" id="createsrv-tab" data-bs-toggle="tab" data-bs-target="#createsrv" type="button"
        role="tab" aria-controls="createsrv" aria-selected="false">서버생성</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="notice-tab" data-bs-toggle="tab" data-bs-target="#notice" type="button"
        role="tab" aria-controls="notice" aria-selected="false">서버-공지</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="calendar-tab" data-bs-toggle="tab" data-bs-target="#calendar" type="button"
        role="tab" aria-controls="calendar" aria-selected="false">서버-일정</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="chat-tab" data-bs-toggle="tab" data-bs-target="#chat" type="button"
        role="tab" aria-controls="chat" aria-selected="false">서버-채팅</button>
    </li>
    </ul>

    <!-- 내용 -->
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade show active text-center" id="login" role="tabpanel" aria-labelledby="login-tab">
        <div class="form-signin">
          <img class="mb-4" src="/docs/5.1/assets/brand/bootstrap-logo.svg" alt="" width="72" height="57">
          <h1 class="h3 mb-3 fw-normal">Login</h1>

          <div class="form-floating">
            <input type="email" class="form-control" id="email" placeholder="name@example.com">
            <label for="email">Email address</label>
          </div>
          <div class="form-floating">
            <input type="password" class="form-control" id="password" placeholder="Password">
            <label for="password">Password</label>
          </div>
          <p></p>
          <button class="w-100 btn btn-lg btn-primary submit">Login</button>
          <p class="mt-5 mb-3 text-muted">© 2022.04.03</p>
        </div>
      </div>

      <div class="tab-pane fade text-center" id="join" role="tabpanel" aria-labelledby="join-tab">
        <div class="form-signin">
          <img class="mb-4" src="/docs/5.1/assets/brand/bootstrap-logo.svg" alt="" width="72" height="57">
          <h1 class="h3 mb-3 fw-normal">Join</h1>

          <div class="form-floating">
            <input type="text" class="form-control" id="join_name" placeholder="name">
            <label for="join_name">Name</label>
          </div>
          <div class="form-floating">
            <input type="email" class="form-control" id="join_email" placeholder="name@example.com">
            <label for="join_email">Email address</label>
          </div>
          <div class="form-floating">
            <input type="password" class="form-control" id="join_pwd" placeholder="Password">
            <label for="join_pwd">Password</label>
          </div>
          <div class="form-floating">
            <input type="text" class="form-control" id="join_tel" placeholder="01012345678">
            <label for="join_tel">Phone</label>
          </div>
          <div class="checkbox mb-3">
            <label>
              <input type="checkbox" value="remember-me" id="agree"> Remember me
            </label>
          </div>
          <p></p>
          <button class="w-100 btn btn-lg btn-primary join">Join</button>
          <p class="mt-5 mb-3 text-muted">© 2022.04.03</p>
        </div>
      </div>

      <div class="tab-pane fade text-center" id="createsrv" role="tabpanel" aria-labelledby="createsrv-tab">
        <div class="form-signin">
          <h1 class="h3 mb-3 fw-normal">서버 생성</h1>

          <div class="form-floating">
            <input type="text" class="form-control" id="srv_user_id" placeholder="name">
            <label for="srv_user_id">회원ID(임시)</label>
          </div>
          <div class="form-floating">
            <input type="text" class="form-control" id="srv_name" placeholder="name">
            <label for="srv_name">서버명</label>
          </div>
          <p></p>
          <button class="w-100 btn btn-lg btn-primary createsrv">생성</button>

          <p></p>
          <h1 class="h3 mb-3 fw-normal mt-5">회원초대</h1>
          <div class="form-floating">
            <input type="text" class="form-control" id="invent_srv_id" placeholder="name">
            <label for="invent_srv_id">서버ID</label>
          </div>
          <div class="form-floating">
            <input type="text" class="form-control" id="invent_user_email" placeholder="name">
            <label for="invent_user_email">회원 EMAIL</label>
          </div>
          <p></p>
          <button class="w-100 btn btn-lg btn-primary invent">초대</button>

          <p class="mt-5 mb-3 text-muted">© 2022.04.05</p>
        </div>
      </div>

      <div class="tab-pane fade text-center" id="notice" role="tabpanel" aria-labelledby="notice-tab">
        <div class="d-flex flex-column flex-shrink-0 p-3 bg-light" style="width: 280px;">
        <div class="form-signin">
          <div class="form-floating">
            <input type="text" class="form-control" id="notice_srv_id" placeholder="name">
            <label for="notice_srv_id">서버ID</label>
          </div>

          <h1 class="h3 mb-3 fw-normal mt-5">공지 추가</h1>
          <div class="form-floating">
            <input type="text" class="form-control" id="add_notice_name" placeholder="name">
            <label for="add_notice_name">공지명</label>
          </div>
          <div class="form-floating">
            <input type="text" class="form-control" id="add_notice_memo" placeholder="name">
            <label for="add_notice_memo">공지 내용</label>
          </div>
          <p></p>
          <button class="w-100 btn btn-lg btn-primary add_notice">공지 추가</button>
        </div>
      </div>
      </div>

      <div class="tab-pane fade text-center" id="calendar" role="tabpanel" aria-labelledby="calendar-tab">
        <div class="d-flex flex-column flex-shrink-0 p-3 bg-light" style="width: 280px;">
        <div class="form-signin">
          <div class="form-floating">
            <input type="text" class="form-control" id="calendar_srv_id" placeholder="name">
            <label for="calendar_srv_id">서버ID</label>
          </div>
          <h1 class="h3 mb-3 fw-normal mt-5">일정 추가</h1>
          <div class="form-floating">
            <input type="text" class="form-control" id="add_calendar_date" placeholder="name">
            <label for="add_calendar_date">일정 시간</label>
          </div>
          <div class="form-floating">
            <input type="text" class="form-control" id="add_calendar_memo" placeholder="name">
            <label for="add_calendar_memo">일정 내용</label>
          </div>
          <p></p>
          <button class="w-100 btn btn-lg btn-primary add_calendar">일정 추가</button>
        </div>

      </div>
      </div>

      <div class="tab-pane fade text-center" id="chat" role="tabpanel" aria-labelledby="chat-tab">
        <div class="d-flex flex-column flex-shrink-0 p-3 bg-light" style="width: 280px;">
        <div class="form-signin">
          <div class="form-floating">
            <input type="text" class="form-control" id="chat_srv_id" placeholder="name">
            <label for="chat_srv_id">서버ID</label>
          </div>
          <h1 class="h3 mb-3 fw-normal mt-5">채팅 추가</h1>
          <div class="form-floating">
            <input type="text" class="form-control" id="add_chat_name" placeholder="name">
            <label for="add_chat_name">채팅방 이름</label>
          </div>
          <p></p>
          <button class="w-100 btn btn-lg btn-primary add_chat">채팅 추가</button>
        </div>

      </div>
      
    </div>

    </div>

  </main>

  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script>

    $(() => {
      $('.submit').click(() => {
        var email = $('#email').val();
        var password = $('#password').val();

        // var parmas = {"user_email": email, "user_pwd":password}

        axios.post('/login', {
          params: {
            'user_email': email,
            'user_pwd': password
          }
        })
          .then(res => {
            let result = res.data.result;

            if (result == "ok") {
              alert("로그인 성공")
            } else {
              alert("로그인 실패")
            }

          })
          .catch(e => console.log(e))
      })

      $('.join').click(() => {
        var name = $('#join_name').val();
        var email = $('#join_email').val();
        var password = $('#join_pwd').val();
        var tel = $('#join_tel').val();

        // var parmas = {"user_email": email, "user_pwd":password}

        axios.post('/join', {
          params: {
            'user_name': name,
            'user_email': email,
            'user_pwd': password,
            'user_tel': tel,
          }
        })
          .then(res => {
            let result = res.data.result;

            if (result == "ok") {
              alert("회원가입 성공")
            } else {
              alert("회원가입 실패")
            }

          })
          .catch(e => console.log(e))
      })

      $('.createsrv').click(() => {
        var srv_user_id = $('#srv_user_id').val();
        var srv_name = $('#srv_name').val();

        axios.post('/server/create', {
          params: {
            'user_id': srv_user_id,
            'srv_name': srv_name,
          }
        })
          .then(res => {
            let result = res.data.result;

            if (result == "ok") {
              alert("서버생성 성공")
            } else {
              alert("서버생성 실패")
            }

          })
          .catch(e => console.log(e))
      })

      $('.invent').click(() => {
        var invent_srv_id = $('#invent_srv_id').val();
        var invent_user_email = $('#invent_user_email').val();

        axios.post('/server/invent', {
          params: {
            'srv_id': invent_srv_id,
            'user_email': invent_user_email,
          }
        })
          .then(res => {
            let result = res.data.result;

            if (result == "ok") {
              alert("회원초대 성공")
            } else {
              alert("회원초대 실패")
            }

          })
          .catch(e => console.log(e))
      })

      $('.add_notice').click(() => {
        var srv_id = $('#notice_srv_id').val();
        //var user_id;
        var  add_notice_name = $('#add_notice_name').val();
        var add_notice_memo = $('#add_notice_memo').val();

        axios.post('/server/notice/add', {
          params: {
            'srv_id': srv_id,
            'user_id' : 1,
            'notice_name': add_notice_name,
            'notice_memo': add_notice_memo,
          }
        })
          .then(res => {
            let result = res.data.result;

            if (result == "ok") {
              alert("공지추가 성공")
            } else {
              alert("공지추가 실패")
            }

          })
          .catch(e => console.log(e))
      })
      
     
    })

  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script>
    let key = "${param.key}";
    console.log(key);
    if (key === "login") {

      $("join-tab").removeClass("active");
      $("#createsrv-tab").removeClass("active");
      $("#notice-tab").removeClass("active");
      $("#calendar-tab").removeClass("active");
      $("#chat-tab").removeClass("active");
      $("#login-tab").addClass("active");

      $("join").removeClass("show active");
      $("#createsrv").removeClass("show active");
      $("#notice").removeClass("show active");
      $("#calendar").removeClass("show active");
      $("#chat").removeClass("show active");
      $("#login").addClass("show active");

    } else if (key === "join") {

      $("#createsrv-tab").removeClass("active");
      $("#login-tab").removeClass("active");
      $("#notice-tab").removeClass("active");
      $("#calendar-tab").removeClass("active");
      $("#chat-tab").removeClass("active");
      $("join-tab").addClass("active");

      $("#login").removeClass("show active");
      $("#createsrv").removeClass("show active");
      $("#notice").removeClass("show active");
      $("#calendar").removeClass("show active");
      $("#chat").removeClass("show active");
      $("join").addClass("show active");

    } else if (key === "createsrv") {

      $("#login-tab").removeClass("active");
      $("join-tab").removeClass("active");
      $("notice-tab").removeClass("active");
      $("calendar-tab").removeClass("active");
      $("chat-tab").removeClass("active");
      $("#createsrv-tab").addClass("active");

      $("join").removeClass("show active");
      $("#login").removeClass("show active");
      $("#notice").removeClass("show active");
      $("#calendar").removeClass("show active");
      $("#chat").removeClass("show active");
      $("#createsrv").addClass("show active");

    } else if (key === "notice") {

      $("#login-tab").removeClass("active");
      $("join-tab").removeClass("active");
      $("#createsrv-tab").removeClass("active");
      $("#calendar-tab").removeClass("active");
      $("#chat-tab").removeClass("active");
      $("#notice-tab").addClass("active");

      $("join").removeClass("show active");
      $("#login").removeClass("show active");
      $("#createsrv").removeClass("show active");
      $("#calendar").removeClass("show active");
      $("#chat").removeClass("show active");
      $("#notice").addClass("show active");

    } else if (key === "calendar") {

      $("#login-tab").removeClass("active");
      $("join-tab").removeClass("active");
      $("#createsrv-tab").removeClass("active");
      $("#notice-tab").removeClass("active");
      $("#chat-tab").removeClass("active");
      $("#calendar-tab").addClass("active");

      $("join").removeClass("show active");
      $("#login").removeClass("show active");
      $("#createsrv").removeClass("show active");
      $("#notice").removeClass("show active");
      $("#chat").removeClass("show active");
      $("#calendar").addClass("show active");

    } else if (key === "notice") {

      $("#login-tab").removeClass("active");
      $("join-tab").removeClass("active");
      $("#createsrv-tab").removeClass("active");
      $("#calendar-tab").removeClass("active");
      $("#notice-tab").removeClass("active");
      $("#chat-tab").addClass("active");

      $("join").removeClass("show active");
      $("#login").removeClass("show active");
      $("#createsrv").removeClass("show active");
      $("#calendar").removeClass("show active");
      $("#notice").removeClass("show active");
      $("#chat").addClass("show active");

    }
  </script>
  <!-- Option 2: Separate Popper and Bootstrap JS -->
  <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    -->
</body>

</html>